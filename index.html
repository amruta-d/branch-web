<!doctype html>
<html>
<head>
  <!-- meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>Branch Testing by ethanneff</title>
  <meta name="viewport" content="width=device-width">

  <!-- styles -->
  <style type="text/css" media="screen">
    * { margin: 0; padding: 0; box-sizing: border-box; color: #212121; text-align: center; border: none;}
    body { background-color: #fafafa; border-top: 0.5em solid #212121; }
    a { text-decoration: none; color: #03a9f4; }
    img {max-width: 90%}
    button {padding: 1em; margin: 0.5em; width: 90%; max-width: 25em; background-color: #212121; color: #ffffff; font-size: 1em;}
  </style>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body>
  <!-- content -->
  <div class="wrapper">
    <header>
      <h1>Branch Test</h1>
      <a href="fetch://">branch android</a>
      <a href="branchsters://">branchsters</a>
      <a href="branchcordova://">branch cordova</a>
    </header>
    <section>      
      <button type="button" id="login">User Login</button>
      <button type="button" id="logout">User Logout</button>
      <button type="button" id="reward">Referral Reward</button>      
      <button type="button" id="redeem">Referral Redeem</button>      
      <button type="button" id="credits">Referral Credits</button>
      <button type="button" id="history">Referral History</button>
    </section>
    <footer>
      <p><small>&mdash; <a href="https://github.com/ethanneff/branch-deepview-2">view the code</a> &mdash;</small></p>
      <p><small>&mdash; <a href="https://github.com/ethanneff">ethanneff</a> &mdash;</small></p>
    </footer>
  </div>

  <!-- branch -->
  <script type="text/javascript">
    // branch code
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode".split(" "), 0);
      
    // branch init
    branch.init('key_live_bnzph7LB0peezd7lNZBb2keaxqkB66w4', function(err,data) {
      alert(JSON.stringify(data));
    });
    
    // cache DOM
    document.getElementById('login').addEventListener("click", userLogin); 
    document.getElementById('logout').addEventListener("click", userLogout); 
    document.getElementById('reward').addEventListener("click", referralReward);    
    document.getElementById('redeem').addEventListener("click", referralRedeem);
    document.getElementById('credits').addEventListener("click", referralCredits);
    document.getElementById('history').addEventListener("click", referralHistory);
    
    // methods
    function userLogin() {
      branch.setIdentity('bob', function(err,data) {
      	alert('error: ' + err + ' data: ' + data);
      });
    }
    
    function userLogout() {
      branch.setIdentity(function(err,data) {
        alert('error: ' + err + ' data: ' + data);
      });      
    }
    
    function referralReward() {
      // 10
      branch.track('done', function(err,data) {
      	alert('error: ' + err + ' data: ' + data);
      });
    }
    
    function referralRedeem() {
      branch.redeem(5, 'default', function(err,data) {
      	alert('error: ' + err + ' data: ' + data);
      });
    }
    
    function referralCredits() {
      branch.credits(function(err,data) {
      	alert('error: ' + err + ' data: ' + data);
      });      
    }

    function referralHistory() {
      branch.creditHistory(function(err,data) {
      	alert('error: ' + err + ' data: ' + data);
      });
    }
  </script>
</body>
</html>
